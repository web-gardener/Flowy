var flowy=function(e,t,l,i,o,n,d){t||(t=function(){}),l||(l=function(){}),i||(i=function(){return!0}),o||(o=function(){return!1}),n||(n=20),d||(d=80),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var r=!1;function c(e,t,l){return i(e,t,l)}function a(e,t){return o(e,t)}flowy.load=function(){if(!r){r=!0;var i=[],o=[],s=e,p=0,u=0;"absolute"!=window.getComputedStyle(s).position&&"fixed"!=window.getComputedStyle(s).position||(p=s.getBoundingClientRect().left,u=s.getBoundingClientRect().top);var g,w,f,h,y,C,v=!1,m=n,B=d,R=0,x=!1,S=!1,L=0,b=document.createElement("DIV");b.classList.add("indicator"),b.classList.add("invisible"),s.appendChild(b),flowy.import=function(e){s.innerHTML=e.html;for(var t=0;t<e.blockarr.length;t++){var l={childwidth:parseFloat(e.blockarr[t].childwidth),parent:parseFloat(e.blockarr[t].parent),id:parseFloat(e.blockarr[t].id),x:parseFloat(e.blockarr[t].x),y:parseFloat(e.blockarr[t].y),width:parseFloat(e.blockarr[t].width),height:parseFloat(e.blockarr[t].height)};i.push(l)}i.length>1&&(N(),I())},flowy.output=function(){var e={html:s.innerHTML,blockarr:i,blocks:[]};if(i.length>0){for(var t=0;t<i.length;t++){e.blocks.push({id:i[t].id,parent:i[t].parent,data:[],attr:[]});var l=document.querySelector(".blockid[value='"+i[t].id+"']").parentNode;l.querySelectorAll("input").forEach(function(l){var i=l.getAttribute("name"),o=l.value;e.blocks[t].data.push({name:i,value:o})}),Array.prototype.slice.call(l.attributes).forEach(function(l){var i={};i[l.name]=l.value,e.blocks[t].attr.push(i)})}return e}},flowy.deleteBlocks=function(){i=[],s.innerHTML="<div class='indicator invisible'></div>"},flowy.beginDrag=function(e){if("absolute"!=window.getComputedStyle(s).position&&"fixed"!=window.getComputedStyle(s).position||(p=s.getBoundingClientRect().left,u=s.getBoundingClientRect().top),e.targetTouches?(y=e.changedTouches[0].clientX,C=e.changedTouches[0].clientY):(y=e.clientX,C=e.clientY),3!=e.which&&e.target.closest(".create-flowy")){h=e.target.closest(".create-flowy");var l=e.target.closest(".create-flowy").cloneNode(!0);e.target.closest(".create-flowy").classList.add("dragnow"),l.classList.add("block"),l.classList.remove("create-flowy"),0===i.length?(l.innerHTML+="<input type='hidden' name='blockid' class='blockid' value='"+i.length+"'>",document.body.appendChild(l),g=document.querySelector(".blockid[value='"+i.length+"']").parentNode):(l.innerHTML+="<input type='hidden' name='blockid' class='blockid' value='"+(Math.max.apply(Math,i.map(e=>e.id))+1)+"'>",document.body.appendChild(l),g=document.querySelector(".blockid[value='"+(parseInt(Math.max.apply(Math,i.map(e=>e.id)))+1)+"']").parentNode),o=e.target.closest(".create-flowy"),t(o),g.classList.add("dragging"),v=!0,w=y-e.target.closest(".create-flowy").getBoundingClientRect().left,f=C-e.target.closest(".create-flowy").getBoundingClientRect().top,g.style.left=y-w+"px",g.style.top=C-f+"px"}var o},document.addEventListener("mousedown",q,!1),document.addEventListener("touchstart",q,!1),document.addEventListener("mouseup",q,!1),flowy.touchDone=function(){S=!1},document.addEventListener("mousedown",flowy.beginDrag),document.addEventListener("touchstart",flowy.beginDrag),flowy.endDrag=function(e){if(3!=e.which&&(v||x))if(S=!1,l(),document.querySelector(".indicator").classList.contains("invisible")||document.querySelector(".indicator").classList.add("invisible"),v&&(h.classList.remove("dragnow"),g.classList.remove("dragging")),0===parseInt(g.querySelector(".blockid").value)&&x){g.classList.remove("dragging"),x=!1;for(var t=0;t<o.length;t++)if(o[t].id!=parseInt(g.querySelector(".blockid").value)){const e=document.querySelector(".blockid[value='"+o[t].id+"']").parentNode,l=document.querySelector(".arrowid[value='"+o[t].id+"']").parentNode;e.style.left=e.getBoundingClientRect().left+window.scrollX-window.scrollX+s.scrollLeft-1+s.getBoundingClientRect().left-2*p+"px",e.style.top=e.getBoundingClientRect().top+window.scrollY-window.scrollY+s.scrollTop+s.getBoundingClientRect().top-2*u-1+"px",l.style.left=l.getBoundingClientRect().left+window.scrollX-window.scrollX+s.scrollLeft+s.getBoundingClientRect().left-2*p-1+"px",l.style.top=l.getBoundingClientRect().top+window.scrollY+s.scrollTop-1+s.getBoundingClientRect().top-2*u+"px",s.appendChild(e),s.appendChild(l),o[t].x=e.getBoundingClientRect().left+window.scrollX+parseInt(e.offsetWidth)/2+s.scrollLeft-s.getBoundingClientRect().left-1,o[t].y=e.getBoundingClientRect().top+window.scrollY+parseInt(e.offsetHeight)/2+s.scrollTop-s.getBoundingClientRect().top-1}o.filter(e=>0==e.id)[0].x=g.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft-s.getBoundingClientRect().left,o.filter(e=>0==e.id)[0].y=g.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(g).height)/2+s.scrollTop-s.getBoundingClientRect().top,i=i.concat(o),o=[]}else if(v&&0==i.length&&g.getBoundingClientRect().top+window.scrollY>s.getBoundingClientRect().top+window.scrollY&&g.getBoundingClientRect().left+window.scrollX>s.getBoundingClientRect().left+window.scrollX)c(g,!0,void 0),v=!1,g.style.top=g.getBoundingClientRect().top+window.scrollY-(u+window.scrollY)+s.scrollTop+"px",g.style.left=g.getBoundingClientRect().left+window.scrollX-(p+window.scrollX)+s.scrollLeft+"px",s.appendChild(g),i.push({parent:-1,childwidth:0,id:parseInt(g.querySelector(".blockid").value),x:g.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft-s.getBoundingClientRect().left,y:g.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(g).height)/2+s.scrollTop-s.getBoundingClientRect().top,width:parseInt(window.getComputedStyle(g).width),height:parseInt(window.getComputedStyle(g).height)});else if(v&&0==i.length)s.appendChild(document.querySelector(".indicator")),g.parentNode.removeChild(g);else if(v)for(var n=g.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft-s.getBoundingClientRect().left,d=g.getBoundingClientRect().top+window.scrollY+s.scrollTop-s.getBoundingClientRect().top,r=i.map(e=>e.id),w=0;w<i.length;w++){if(n>=i.filter(e=>e.id==r[w])[0].x-i.filter(e=>e.id==r[w])[0].width/2-m&&n<=i.filter(e=>e.id==r[w])[0].x+i.filter(e=>e.id==r[w])[0].width/2+m&&d>=i.filter(e=>e.id==r[w])[0].y-i.filter(e=>e.id==r[w])[0].height/2&&d<=i.filter(e=>e.id==r[w])[0].y+i.filter(e=>e.id==r[w])[0].height){v=!1,c(g,!1,document.querySelector(".blockid[value='"+r[w]+"']").parentNode)?k(g,w,r):(v=!1,s.appendChild(document.querySelector(".indicator")),g.parentNode.removeChild(g));break}w==i.length-1&&(v=!1,s.appendChild(document.querySelector(".indicator")),g.parentNode.removeChild(g))}else if(x)for(n=g.getBoundingClientRect().left+window.scrollX+p+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft-s.getBoundingClientRect().left,d=g.getBoundingClientRect().top+window.scrollY+u+s.scrollTop-s.getBoundingClientRect().top,r=i.map(e=>e.id),w=0;w<i.length;w++){if(n>=i.filter(e=>e.id==r[w])[0].x-i.filter(e=>e.id==r[w])[0].width/2-m&&n<=i.filter(e=>e.id==r[w])[0].x+i.filter(e=>e.id==r[w])[0].width/2+m&&d>=i.filter(e=>e.id==r[w])[0].y-i.filter(e=>e.id==r[w])[0].height/2&&d<=i.filter(e=>e.id==r[w])[0].y+i.filter(e=>e.id==r[w])[0].height){v=!1,g.classList.remove("dragging"),k(g,w,r);break}if(w==i.length-1){if(a(g,i.filter(e=>e.id==r[w])[0])){v=!1,g.classList.remove("dragging"),k(g,r.indexOf(L),r);break}x=!1,o=[],v=!1,s.appendChild(document.querySelector(".indicator")),g.parentNode.removeChild(g);break}}},document.addEventListener("mouseup",flowy.endDrag,!1),document.addEventListener("touchend",flowy.endDrag,!1),flowy.moveBlock=function(e){if(e.targetTouches?(y=e.targetTouches[0].clientX,C=e.targetTouches[0].clientY):(y=e.clientX,C=e.clientY),S){x=!0,g.classList.add("dragging");var t=parseInt(g.querySelector(".blockid").value);L=i.filter(e=>e.id==t)[0].parent,o.push(i.filter(e=>e.id==t)[0]),i=i.filter(function(e){return e.id!=t}),0!=t&&document.querySelector(".arrowid[value='"+t+"']").parentNode.remove();for(var l=i.filter(e=>e.parent==t),n=!1,d=[],r=[];!n;){for(var c=0;c<l.length;c++)if(l[c]!=t){o.push(i.filter(e=>e.id==l[c].id)[0]);const e=document.querySelector(".blockid[value='"+l[c].id+"']").parentNode,t=document.querySelector(".arrowid[value='"+l[c].id+"']").parentNode;e.style.left=e.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+"px",e.style.top=e.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+"px",t.style.left=t.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+"px",t.style.top=t.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+"px",g.appendChild(e),g.appendChild(t),d.push(l[c].id),r.push(l[c].id)}0==d.length?n=!0:(l=i.filter(e=>d.includes(e.parent)),d=[])}for(c=0;c<i.filter(e=>e.parent==t).length;c++){var a=i.filter(e=>e.parent==t)[c];i=i.filter(function(e){return e.id!=a})}for(c=0;c<r.length;c++){a=r[c];i=i.filter(function(e){return e.id!=a})}i.length>1&&N(),S=!1}if(v?(g.style.left=y-w+"px",g.style.top=C-f+"px"):x&&(g.style.left=y-w-(window.scrollX+p)+s.scrollLeft+"px",g.style.top=C-f-(window.scrollY+u)+s.scrollTop+"px",o.filter(e=>e.id==parseInt(g.querySelector(".blockid").value)).x=g.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft,o.filter(e=>e.id==parseInt(g.querySelector(".blockid").value)).y=g.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(g).height)/2+s.scrollTop),v||x){y>s.getBoundingClientRect().width+s.getBoundingClientRect().left-10&&y<s.getBoundingClientRect().width+s.getBoundingClientRect().left+10?s.scrollLeft+=10:y<s.getBoundingClientRect().left+10&&y>s.getBoundingClientRect().left-10?s.scrollLeft-=10:C>s.getBoundingClientRect().height+s.getBoundingClientRect().top-10&&C<s.getBoundingClientRect().height+s.getBoundingClientRect().top+10?s.scrollTop+=10:C<s.getBoundingClientRect().top+10&&C>s.getBoundingClientRect().top-10&&(s.scrollLeft-=10);var h=g.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(g).width)/2+s.scrollLeft-s.getBoundingClientRect().left,B=g.getBoundingClientRect().top+window.scrollY+s.scrollTop-s.getBoundingClientRect().top,R=i.map(e=>e.id);for(c=0;c<i.length;c++){if(h>=i.filter(e=>e.id==R[c])[0].x-i.filter(e=>e.id==R[c])[0].width/2-m&&h<=i.filter(e=>e.id==R[c])[0].x+i.filter(e=>e.id==R[c])[0].width/2+m&&B>=i.filter(e=>e.id==R[c])[0].y+i.filter(e=>e.id==R[c])[0].height/2&&B<=i.filter(e=>e.id==R[c])[0].y+i.filter(e=>e.id==R[c])[0].height){document.querySelector(".blockid[value='"+R[c]+"']").parentNode.appendChild(document.querySelector(".indicator")),document.querySelector(".indicator").style.left=document.querySelector(".blockid[value='"+R[c]+"']").parentNode.offsetWidth/2-5+"px",document.querySelector(".indicator").style.top=document.querySelector(".blockid[value='"+R[c]+"']").parentNode.offsetHeight+"px",document.querySelector(".indicator").classList.remove("invisible");break}c==i.length-1&&(document.querySelector(".indicator").classList.contains("invisible")||document.querySelector(".indicator").classList.add("invisible"))}}},document.addEventListener("mousemove",flowy.moveBlock,!1),document.addEventListener("touchmove",flowy.moveBlock,!1)}function k(e,t,l){x||s.appendChild(e);for(var n=0,d=0,r=0;r<i.filter(e=>e.parent==l[t]).length;r++){(y=i.filter(e=>e.parent==l[t])[r]).childwidth>y.width?n+=y.childwidth+m:n+=y.width+m}n+=parseInt(window.getComputedStyle(e).width);for(r=0;r<i.filter(e=>e.parent==l[t]).length;r++){(y=i.filter(e=>e.parent==l[t])[r]).childwidth>y.width?(document.querySelector(".blockid[value='"+y.id+"']").parentNode.style.left=i.filter(e=>e.id==l[t])[0].x-n/2+d+y.childwidth/2-y.width/2+"px",y.x=i.filter(e=>e.parent==l[t])[0].x-n/2+d+y.childwidth/2,d+=y.childwidth+m):(document.querySelector(".blockid[value='"+y.id+"']").parentNode.style.left=i.filter(e=>e.id==l[t])[0].x-n/2+d+"px",y.x=i.filter(e=>e.parent==l[t])[0].x-n/2+d+y.width/2,d+=y.width+m)}if(e.style.left=i.filter(e=>e.id==l[t])[0].x-n/2+d-(window.scrollX+p)+s.scrollLeft+s.getBoundingClientRect().left+"px",e.style.top=i.filter(e=>e.id==l[t])[0].y+i.filter(e=>e.id==l[t])[0].height/2+B-(window.scrollY+u)+s.getBoundingClientRect().top+"px",x){o.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0].x=e.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(e).width)/2+s.scrollLeft-s.getBoundingClientRect().left,o.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0].y=e.getBoundingClientRect().top+window.scrollY+u+parseInt(window.getComputedStyle(e).height)/2+s.scrollTop-s.getBoundingClientRect().top,o.filter(t=>t.id==e.querySelector(".blockid").value)[0].parent=l[t];for(r=0;r<o.length;r++)if(o[r].id!=parseInt(e.querySelector(".blockid").value)){const e=document.querySelector(".blockid[value='"+o[r].id+"']").parentNode,t=document.querySelector(".arrowid[value='"+o[r].id+"']").parentNode;e.style.left=e.getBoundingClientRect().left+window.scrollX-(window.scrollX+s.getBoundingClientRect().left)+s.scrollLeft+"px",e.style.top=e.getBoundingClientRect().top+window.scrollY-(window.scrollY+s.getBoundingClientRect().top)+s.scrollTop+"px",t.style.left=t.getBoundingClientRect().left+window.scrollX-(window.scrollX+s.getBoundingClientRect().left)+s.scrollLeft+20+"px",t.style.top=t.getBoundingClientRect().top+window.scrollY-(window.scrollY+s.getBoundingClientRect().top)+s.scrollTop+"px",s.appendChild(e),s.appendChild(t),o[r].x=e.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(e).width)/2+s.scrollLeft-s.getBoundingClientRect().left,o[r].y=e.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(e).height)/2+s.scrollTop-s.getBoundingClientRect().top}i=i.concat(o),o=[]}else i.push({childwidth:0,parent:l[t],id:parseInt(e.querySelector(".blockid").value),x:e.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(e).width)/2+s.scrollLeft-s.getBoundingClientRect().left,y:e.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(e).height)/2+s.scrollTop-s.getBoundingClientRect().top,width:parseInt(window.getComputedStyle(e).width),height:parseInt(window.getComputedStyle(e).height)});var c=i.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0],a=c.x-i.filter(e=>e.id==l[t])[0].x+20,g=B;if(a<0?(s.innerHTML+='<div class="arrowblock"><input type="hidden" class="arrowid" value="'+e.querySelector(".blockid").value+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M'+(i.filter(e=>e.id==l[t])[0].x-c.x+5)+" 0L"+(i.filter(e=>e.id==l[t])[0].x-c.x+5)+" "+B/2+"L5 "+B/2+"L5 "+g+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M0 '+(g-5)+"H10L5 "+g+"L0 "+(g-5)+'Z" fill="#C5CCD0"/></svg></div>',document.querySelector('.arrowid[value="'+e.querySelector(".blockid").value+'"]').parentNode.style.left=c.x-5-(p+window.scrollX)+s.scrollLeft+s.getBoundingClientRect().left+"px"):(s.innerHTML+='<div class="arrowblock"><input type="hidden" class="arrowid" value="'+e.querySelector(".blockid").value+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 0L20 '+B/2+"L"+a+" "+B/2+"L"+a+" "+g+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M'+(a-5)+" "+(g-5)+"H"+(a+5)+"L"+a+" "+g+"L"+(a-5)+" "+(g-5)+'Z" fill="#C5CCD0"/></svg></div>',document.querySelector('.arrowid[value="'+parseInt(e.querySelector(".blockid").value)+'"]').parentNode.style.left=i.filter(e=>e.id==l[t])[0].x-20-(p+window.scrollX)+s.scrollLeft+s.getBoundingClientRect().left+"px"),document.querySelector('.arrowid[value="'+parseInt(e.querySelector(".blockid").value)+'"]').parentNode.style.top=i.filter(e=>e.id==l[t])[0].y+i.filter(e=>e.id==l[t])[0].height/2+s.getBoundingClientRect().top-u+"px",-1!=i.filter(e=>e.id==l[t])[0].parent){for(var w=!1,f=l[t];!w;)if(-1==i.filter(e=>e.id==f)[0].parent)w=!0;else{var h=0;for(r=0;r<i.filter(e=>e.parent==f).length;r++){var y;(y=i.filter(e=>e.parent==f)[r]).childwidth>y.width?r==i.filter(e=>e.parent==f).length-1?h+=y.childwidth:h+=y.childwidth+m:r==i.filter(e=>e.parent==f).length-1?h+=y.width:h+=y.width+m}i.filter(e=>e.id==f)[0].childwidth=h,f=i.filter(e=>e.id==f)[0].parent}i.filter(e=>e.id==f)[0].childwidth=n}x&&(x=!1,e.classList.remove("dragging")),N(),I()}function q(e){if(S=!1,X(e.target,"block")){var t=e.target.closest(".block");e.targetTouches?(y=e.targetTouches[0].clientX,C=e.targetTouches[0].clientY):(y=e.clientX,C=e.clientY),"mouseup"!==e.type&&X(e.target,"block")&&3!=e.which&&(v||x||(S=!0,w=y-((g=t).getBoundingClientRect().left+window.scrollX),f=C-(g.getBoundingClientRect().top+window.scrollY)))}}function X(e,t){return!!(e.className&&e.className.split(" ").indexOf(t)>=0)||e.parentNode&&X(e.parentNode,t)}function I(){R=i.map(e=>e.x);var e=i.map(e=>e.width),t=R.map(function(t,l){return t-e[l]/2});if((R=Math.min.apply(Math,t))<s.getBoundingClientRect().left+window.scrollX-p){for(var l=i.map(e=>e.id),o=0;o<i.length;o++)if(document.querySelector(".blockid[value='"+i.filter(e=>e.id==l[o])[0].id+"']").parentNode.style.left=i.filter(e=>e.id==l[o])[0].x-i.filter(e=>e.id==l[o])[0].width/2-R+s.getBoundingClientRect().left-p+20+"px",-1!=i.filter(e=>e.id==l[o])[0].parent){var n=i.filter(e=>e.id==l[o])[0],d=n.x-i.filter(e=>e.id==i.filter(e=>e.id==l[o])[0].parent)[0].x;document.querySelector('.arrowid[value="'+l[o]+'"]').parentNode.style.left=d<0?n.x-R+20-5+s.getBoundingClientRect().left-p+"px":i.filter(e=>e.id==i.filter(e=>e.id==l[o])[0].parent)[0].x-20-R+s.getBoundingClientRect().left-p+20+"px"}for(o=0;o<i.length;o++)i[o].x=document.querySelector(".blockid[value='"+i[o].id+"']").parentNode.getBoundingClientRect().left+window.scrollX+s.scrollLeft+parseInt(window.getComputedStyle(document.querySelector(".blockid[value='"+i[o].id+"']").parentNode).width)/2-20-s.getBoundingClientRect().left}}function N(){for(var e=i.map(e=>e.parent),t=0;t<e.length;t++){-1==e[t]&&t++;for(var l=0,o=0,n=0;n<i.filter(l=>l.parent==e[t]).length;n++){var d=i.filter(l=>l.parent==e[t])[n];0==i.filter(e=>e.parent==d.id).length&&(d.childwidth=0),d.childwidth>d.width?n==i.filter(l=>l.parent==e[t]).length-1?l+=d.childwidth:l+=d.childwidth+m:n==i.filter(l=>l.parent==e[t]).length-1?l+=d.width:l+=d.width+m}-1!=e[t]&&(i.filter(l=>l.id==e[t])[0].childwidth=l);for(n=0;n<i.filter(l=>l.parent==e[t]).length;n++){d=i.filter(l=>l.parent==e[t])[n];const g=document.querySelector(".blockid[value='"+d.id+"']").parentNode,w=i.filter(l=>l.id==e[t]);g.style.top=w.y+B+s.getBoundingClientRect().top-u+"px",w.y=w.y+B,d.childwidth>d.width?(g.style.left=w[0].x-l/2+o+d.childwidth/2-d.width/2-(p+window.scrollX)+s.getBoundingClientRect().left+"px",d.x=w[0].x-l/2+o+d.childwidth/2,o+=d.childwidth+m):(g.style.left=w[0].x-l/2+o-(p+window.scrollX)+s.getBoundingClientRect().left+"px",d.x=w[0].x-l/2+o+d.width/2,o+=d.width+m);var r=i.filter(e=>e.id==d.id)[0],c=r.x-i.filter(e=>e.id==d.parent)[0].x+20,a=B;c<0?(document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.style.left=r.x-5-(p+window.scrollX)+s.getBoundingClientRect().left+"px",document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.innerHTML='<input type="hidden" class="arrowid" value="'+d.id+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M'+(i.filter(e=>e.id==d.parent)[0].x-r.x+5)+" 0L"+(i.filter(e=>e.id==d.parent)[0].x-r.x+5)+" "+B/2+"L5 "+B/2+"L5 "+a+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M0 '+(a-5)+"H10L5 "+a+"L0 "+(a-5)+'Z" fill="#C5CCD0"/></svg>'):(document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.style.left=i.filter(e=>e.id==d.parent)[0].x-20-(p+window.scrollX)+s.getBoundingClientRect().left+"px",document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.innerHTML='<input type="hidden" class="arrowid" value="'+d.id+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 0L20 '+B/2+"L"+c+" "+B/2+"L"+c+" "+a+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M'+(c-5)+" "+(a-5)+"H"+(c+5)+"L"+c+" "+a+"L"+(c-5)+" "+(a-5)+'Z" fill="#C5CCD0"/></svg>')}}}},flowy.load()};
