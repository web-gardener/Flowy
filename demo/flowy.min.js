var flowy=function(e,t,l,i,o,d){t||(t=function(){}),l||(l=function(){}),i||(i=function(){return!0}),o||(o=20),d||(d=80);var r=!1;function n(e,t,l){return i(e,t,l)}flowy.load=function(){if(!r){r=!0;var i,c,a,u,s,p,w=[],f=[],g=e,h=!1,y=o,v=d,m=0,C=0,S=!1,q=!1,x=!1,b=document.createElement("DIV");b.classList.add("indicator"),b.classList.add("invisible"),g.appendChild(b),flowy.import=function(e){g.innerHTML=JSON.parse(e.html),w=e.blockarr},flowy.output=function(){var e={html:JSON.stringify(g.innerHTML),blockarr:w,blocks:[]};if(w.length>0){for(var t=0;t<w.length;t++){e.blocks.push({id:w[t].id,parent:w[t].parent,data:[],attr:[]});var l=document.querySelector(".blockid[value='"+w[t].id+"']").parentNode;l.querySelectorAll("input").forEach(function(l){var i=l.getAttribute("name"),o=l.value;e.blocks[t].data.push({name:i,value:o})}),Array.prototype.slice.call(l.attributes).forEach(function(l){var i={};i[l.name]=l.value,e.blocks[t].attr.push(i)})}return e}},flowy.deleteBlocks=function(){w=[],g.innerHTML="<div class='indicator invisible'></div>"},flowy.beginDrag=function(e){if(e.targetTouches?(s=e.changedTouches[0].clientX,p=e.changedTouches[0].clientY):(s=e.clientX,p=e.clientY),3!=e.which&&e.target.closest(".create-flowy")){u=e.target.closest(".create-flowy");var l=e.target.closest(".create-flowy").cloneNode(!0);e.target.closest(".create-flowy").classList.add("dragnow"),l.classList.add("block"),l.classList.remove("create-flowy"),0===w.length?(l.innerHTML+="<input type='hidden' name='blockid' class='blockid' value='"+w.length+"'>",document.body.appendChild(l),i=document.querySelector(".blockid[value='"+w.length+"']").parentNode):(l.innerHTML+="<input type='hidden' name='blockid' class='blockid' value='"+(Math.max.apply(Math,w.map(e=>e.id))+1)+"'>",document.body.appendChild(l),i=document.querySelector(".blockid[value='"+(parseInt(Math.max.apply(Math,w.map(e=>e.id)))+1)+"']").parentNode),o=e.target.closest(".create-flowy"),t(o),i.classList.add("dragging"),h=!0,c=s-e.target.closest(".create-flowy").offsetLeft,a=p-e.target.closest(".create-flowy").offsetTop,i.style.left=s-c+"px",i.style.top=p-a+"px"}var o},document.addEventListener("mousedown",B,!1),document.addEventListener("touchstart",B,!1),document.addEventListener("mouseup",B,!1),flowy.touchDone=function(){x=!1},document.addEventListener("mousedown",flowy.beginDrag),document.addEventListener("touchstart",flowy.beginDrag),flowy.endDrag=function(e){if(3!=e.which&&(h||S))if(x=!1,l(),document.querySelector(".indicator").classList.contains("invisible")||document.querySelector(".indicator").classList.add("invisible"),h&&(u.classList.remove("dragnow"),i.classList.remove("dragging")),0===parseInt(i.querySelector(".blockid").value)&&S){i.classList.remove("dragging"),S=!1;for(var t=0;t<f.length;t++)f[t].id!=parseInt(i.querySelector(".blockid").value)&&(document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.style.left=document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft,document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.style.top=document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+g.scrollTop,document.querySelector(".arrowid[value='"+f[t].id+"']").parentNode.style.left=document.querySelector(".arrowid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft,document.querySelector(".arrowid[value='"+f[t].id+"']").parentNode.style.top=document.querySelector(".arrowid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+g.scrollTop)+"px",g.appendChild(document.querySelector(".blockid[value='"+f[t].id+"']").parentNode),g.appendChild(document.querySelector(".arrowid[value='"+f[t].id+"']").parentNode),f[t].x=document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().left+window.scrollX+parseInt(document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.offsetWidth)/2+g.scrollLeft,f[t].y=document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.getBoundingClientRect().top+window.scrollY+parseInt(document.querySelector(".blockid[value='"+f[t].id+"']").parentNode.offsetHeight)/2+g.scrollTop);f.filter(e=>0==e.id)[0].x=i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).width)/2,f.filter(e=>0==e.id)[0].y=i.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(i).height)/2,w=w.concat(f),f=[]}else if(h&&0==w.length&&i.getBoundingClientRect().top+window.scrollY>g.getBoundingClientRect().top+window.scrollY&&i.getBoundingClientRect().left+window.scrollX>g.getBoundingClientRect().left+window.scrollX)n(i,!0,void 0),h=!1,i.style.top=i.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+g.scrollTop+"px",i.style.left=i.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+"px",g.appendChild(i),w.push({parent:-1,childwidth:0,id:parseInt(i.querySelector(".blockid").value),x:i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).width)/2+g.scrollLeft,y:i.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(i).height)/2+g.scrollTop,width:parseInt(window.getComputedStyle(i).width),height:parseInt(window.getComputedStyle(i).height)});else if(h&&0==w.length)g.appendChild(document.querySelector(".indicator")),i.parentNode.removeChild(i);else if(h||S)for(var o=i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).width)/2+g.scrollLeft,d=i.getBoundingClientRect().top+window.scrollY+g.scrollTop,r=w.map(e=>e.id),c=0;c<w.length;c++){if(o>=w.filter(e=>e.id==r[c])[0].x-w.filter(e=>e.id==r[c])[0].width/2-y&&o<=w.filter(e=>e.id==r[c])[0].x+w.filter(e=>e.id==r[c])[0].width/2+y&&d>=w.filter(e=>e.id==r[c])[0].y-w.filter(e=>e.id==r[c])[0].height/2&&d<=w.filter(e=>e.id==r[c])[0].y+w.filter(e=>e.id==r[c])[0].height){h=!1,!S&&n(i,!1,w.filter(e=>e.id==r[c])[0])?k(i,c,r):S&&k(i,c,r);break}c==w.length-1&&(S&&(S=!1,f=[]),h=!1,g.appendChild(document.querySelector(".indicator")),i.parentNode.removeChild(i))}},document.addEventListener("mouseup",flowy.endDrag,!1),document.addEventListener("touchend",flowy.endDrag,!1),flowy.moveBlock=function(e){if(e.targetTouches?(s=e.targetTouches[0].clientX,p=e.targetTouches[0].clientY):(s=e.clientX,p=e.clientY),x){S=!0,i.classList.add("dragging");var t=parseInt(i.querySelector(".blockid").value);f.push(w.filter(e=>e.id==t)[0]),w=w.filter(function(e){return e.id!=t}),0!=t&&document.querySelector(".arrowid[value='"+t+"']").parentNode.remove();for(var l=w.filter(e=>e.parent==t),o=!1,d=[],r=[];!o;){for(var n=0;n<l.length;n++)l[n]!=t&&(f.push(w.filter(e=>e.id==l[n].id)[0]),document.querySelector(".blockid[value='"+l[n].id+"']").parentNode.style.left=document.querySelector(".blockid[value='"+l[n].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(i.getBoundingClientRect().left+window.scrollX),document.querySelector(".blockid[value='"+l[n].id+"']").parentNode.style.top=document.querySelector(".blockid[value='"+l[n].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(i.getBoundingClientRect().top+window.scrollY),document.querySelector(".arrowid[value='"+l[n].id+"']").parentNode.style.left=document.querySelector(".arrowid[value='"+l[n].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(i.getBoundingClientRect().left+window.scrollX),document.querySelector(".arrowid[value='"+l[n].id+"']").parentNode.style.top=document.querySelector(".arrowid[value='"+l[n].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(i.getBoundingClientRect().top+window.scrollY),i.appendChild(document.querySelector(".blockid[value='"+l[n].id+"']").parentNode),i.appendChild(document.querySelector(".arrowid[value='"+l[n].id+"']").parentNode),d.push(l[n].id),r.push(l[n].id));0==d.length?o=!0:(l=w.filter(e=>d.includes(e.parent)),d=[])}for(n=0;n<w.filter(e=>e.parent==t).length;n++){var u=w.filter(e=>e.parent==t)[n];w=w.filter(function(e){return e.id!=u})}for(n=0;n<r.length;n++){u=r[n];w=w.filter(function(e){return e.id!=u})}w.length>1&&N(),q&&function(){if(C<g.getBoundingClientRect().left+window.scrollX){q=!1;for(var e=w.map(e=>e.id),t=0;t<w.length;t++)if(document.querySelector(".blockid[value='"+w.filter(l=>l.id==e[t])[0].id+"']").parentNode.style.left=w.filter(l=>l.id==e[t])[0].x-w.filter(l=>l.id==e[t])[0].width/2-C-20,w.filter(l=>l.id==e[t])[0].x=document.querySelector(".blockid[value='"+w.filter(l=>l.id==e[t])[0].id+"']").parentNode.getBoundingClientRect().left+window.scrollX+w.filter(l=>l.id==e[t])[0].width/2,-1!=w.filter(l=>l.id==e[t])[0].parent){var l=w.filter(l=>l.id==e[t])[0],i=l.x-w.filter(l=>l.id==w.filter(l=>l.id==e[t])[0].parent)[0].x;document.querySelector('.arrowid[value="'+e[t]+'"]').parentNode.style.left=i<0?l.x-5-(g.getBoundingClientRect().left+window.scrollX)+"px":w.filter(l=>l.id==w.filter(l=>l.id==e[t])[0].parent)[0].x-20-(g.getBoundingClientRect().left+window.scrollX)+"px"}C=0}}(),x=!1}if(h?(i.style.left=s-c+"px",i.style.top=p-a+"px"):S&&(i.style.left=s-c-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+"px",i.style.top=p-a-(g.getBoundingClientRect().top+window.scrollY)+g.scrollTop+"px",f.filter(e=>e.id==parseInt(i.querySelector(".blockid").value)).x=i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).width)/2+g.scrollLeft,f.filter(e=>e.id==parseInt(i.querySelector(".blockid").value)).y=i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).height)/2+g.scrollTop),h||S){var v=i.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(i).width)/2+g.scrollLeft,m=i.getBoundingClientRect().top+window.scrollY+g.scrollTop,b=w.map(e=>e.id);for(n=0;n<w.length;n++){if(v>=w.filter(e=>e.id==b[n])[0].x-w.filter(e=>e.id==b[n])[0].width/2-y&&v<=w.filter(e=>e.id==b[n])[0].x+w.filter(e=>e.id==b[n])[0].width/2+y&&m>=w.filter(e=>e.id==b[n])[0].y-w.filter(e=>e.id==b[n])[0].height/2&&m<=w.filter(e=>e.id==b[n])[0].y+w.filter(e=>e.id==b[n])[0].height){document.querySelector(".blockid[value='"+b[n]+"']").parentNode.appendChild(document.querySelector(".indicator")),document.querySelector(".indicator").style.left=parseInt(window.getComputedStyle(document.querySelector(".blockid[value='"+b[n]+"']").parentNode).width)/2-5+"px",document.querySelector(".indicator").style.top=window.getComputedStyle(document.querySelector(".blockid[value='"+b[n]+"']").parentNode).height,document.querySelector(".indicator").classList.remove("invisible");break}n==w.length-1&&(document.querySelector(".indicator").classList.contains("invisible")||document.querySelector(".indicator").classList.add("invisible"))}}},document.addEventListener("mousemove",flowy.moveBlock,!1),document.addEventListener("touchmove",flowy.moveBlock,!1)}function k(e,t,l){S||g.appendChild(e);for(var i=0,o=0,d=0;d<w.filter(e=>e.parent==l[t]).length;d++){(p=w.filter(e=>e.parent==l[t])[d]).childwidth>p.width?i+=p.childwidth+y:i+=p.width+y}i+=parseInt(window.getComputedStyle(e).width);for(d=0;d<w.filter(e=>e.parent==l[t]).length;d++){(p=w.filter(e=>e.parent==l[t])[d]).childwidth>p.width?(document.querySelector(".blockid[value='"+p.id+"']").parentNode.style.left=w.filter(e=>e.id==l[t])[0].x-i/2+o+p.childwidth/2-p.width/2+"px",p.x=w.filter(e=>e.parent==l[t])[0].x-i/2+o+p.childwidth/2,o+=p.childwidth+y):(document.querySelector(".blockid[value='"+p.id+"']").parentNode.style.left=w.filter(e=>e.id==l[t])[0].x-i/2+o+"px",p.x=w.filter(e=>e.parent==l[t])[0].x-i/2+o+p.width/2,o+=p.width+y)}if(e.style.left=w.filter(e=>e.id==l[t])[0].x-i/2+o-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+"px",e.style.top=w.filter(e=>e.id==l[t])[0].y+w.filter(e=>e.id==l[t])[0].height/2+v-(g.getBoundingClientRect().top+window.scrollY)+"px",S){f.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0].x=e.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(e).width)/2+g.scrollLeft+g.scrollLeft,f.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0].y=e.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(e).height)/2+g.scrollTop,f.filter(t=>t.id==e.querySelector(".blockid").value)[0].parent=l[t];for(d=0;d<f.length;d++)f[d].id!=parseInt(e.querySelector(".blockid").value)&&(document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.style.left=document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft,document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.style.top=document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+g.scrollTop,document.querySelector(".arrowid[value='"+f[d].id+"']").parentNode.style.left=document.querySelector(".arrowid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().left+window.scrollX-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+20,document.querySelector(".arrowid[value='"+f[d].id+"']").parentNode.style.top=document.querySelector(".arrowid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().top+window.scrollY-(g.getBoundingClientRect().top+window.scrollY)+g.scrollTop,g.appendChild(document.querySelector(".blockid[value='"+f[d].id+"']").parentNode),g.appendChild(document.querySelector(".arrowid[value='"+f[d].id+"']").parentNode),f[d].x=document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(document.querySelector(".blockid[value='"+f[d].id+"']")).width)/2+g.scrollLeft,f[d].y=document.querySelector(".blockid[value='"+f[d].id+"']").parentNode.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(document.querySelector(".blockid[value='"+f[d].id+"']").parentNode).height)/2+g.scrollTop);w=w.concat(f),f=[]}else w.push({childwidth:0,parent:l[t],id:parseInt(e.querySelector(".blockid").value),x:e.getBoundingClientRect().left+window.scrollX+parseInt(window.getComputedStyle(e).width)/2+g.scrollLeft,y:e.getBoundingClientRect().top+window.scrollY+parseInt(window.getComputedStyle(e).height)/2+g.scrollTop,width:parseInt(window.getComputedStyle(e).width),height:parseInt(window.getComputedStyle(e).height)});var r=w.filter(t=>t.id==parseInt(e.querySelector(".blockid").value))[0],n=r.x-w.filter(e=>e.id==l[t])[0].x+20,c=parseFloat(r.y-r.height/2-(w.filter(e=>e.parent==l[t])[0].y+w.filter(e=>e.parent==l[t])[0].height/2)+g.scrollTop);if(n<0?(g.innerHTML+='<div class="arrowblock"><input type="hidden" class="arrowid" value="'+e.querySelector(".blockid").value+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M'+(w.filter(e=>e.id==l[t])[0].x-r.x+5)+" 0L"+(w.filter(e=>e.id==l[t])[0].x-r.x+5)+" "+v/2+"L5 "+v/2+"L5 "+c+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M0 '+(c-5)+"H10L5 "+c+"L0 "+(c-5)+'Z" fill="#C5CCD0"/></svg></div>',document.querySelector('.arrowid[value="'+e.querySelector(".blockid").value+'"]').parentNode.style.left=r.x-5-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+"px"):(g.innerHTML+='<div class="arrowblock"><input type="hidden" class="arrowid" value="'+e.querySelector(".blockid").value+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 0L20 '+v/2+"L"+n+" "+v/2+"L"+n+" "+c+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M'+(n-5)+" "+(c-5)+"H"+(n+5)+"L"+n+" "+c+"L"+(n-5)+" "+(c-5)+'Z" fill="#C5CCD0"/></svg></div>',document.querySelector('.arrowid[value="'+parseInt(e.querySelector(".blockid").value)+'"]').parentNode.style.left=w.filter(e=>e.id==l[t])[0].x-20-(g.getBoundingClientRect().left+window.scrollX)+g.scrollLeft+"px"),document.querySelector('.arrowid[value="'+parseInt(e.querySelector(".blockid").value)+'"]').parentNode.style.top=w.filter(e=>e.id==l[t])[0].y+w.filter(e=>e.id==l[t])[0].height/2+"px",-1!=w.filter(e=>e.id==l[t])[0].parent){for(var a=!1,u=l[t];!a;)if(-1==w.filter(e=>e.id==u)[0].parent)a=!0;else{var s=0;for(d=0;d<w.filter(e=>e.parent==u).length;d++){var p;(p=w.filter(e=>e.parent==u)[d]).childwidth>p.width?d==w.filter(e=>e.parent==u).length-1?s+=p.childwidth:s+=p.childwidth+y:d==w.filter(e=>e.parent==u).length-1?s+=p.width:s+=p.width+y}w.filter(e=>e.id==u)[0].childwidth=s,u=w.filter(e=>e.id==u)[0].parent}w.filter(e=>e.id==u)[0].childwidth=i}S&&(S=!1,e.classList.remove("dragging")),N(),function(){m=w.map(e=>e.x);var e=w.map(e=>e.width),t=m.map(function(t,l){return t-e[l]/2});if((m=Math.min.apply(Math,t))<g.getBoundingClientRect().left+window.scrollX){q=!0;for(var l=w.map(e=>e.id),i=0;i<w.length;i++)if(document.querySelector(".blockid[value='"+w.filter(e=>e.id==l[i])[0].id+"']").parentNode.style.left=w.filter(e=>e.id==l[i])[0].x-w.filter(e=>e.id==l[i])[0].width/2-m+20,-1!=w.filter(e=>e.id==l[i])[0].parent){var o=w.filter(e=>e.id==l[i])[0],d=o.x-w.filter(e=>e.id==w.filter(e=>e.id==l[i])[0].parent)[0].x;document.querySelector('.arrowid[value="'+l[i]+'"]').parentNode.style.left=d<0?o.x-m+20-5+"px":w.filter(e=>e.id==w.filter(e=>e.id==l[i])[0].parent)[0].x-20-m+20+"px"}for(var i=0;i<w.length;i++)w[i].x=document.querySelector(".blockid[value='"+w[i].id+"']").parentNode.getBoundingClientRect().left+window.scrollX+(g.getBoundingClientRect().left+window.scrollX)-parseInt(window.getComputedStyle(document.querySelector(".blockid[value='"+w[i].id+"']").parentNode).width)/2-40;C=m}}()}function B(e){if(x=!1,L(e.target,"block")){var t=e.target.closest(".block");e.targetTouches?(s=e.targetTouches[0].clientX,p=e.targetTouches[0].clientY):(s=e.clientX,p=e.clientY),"mouseup"!==e.type&&L(e.target,"block")&&3!=e.which&&(h||S||(x=!0,c=s-((i=t).getBoundingClientRect().left+window.scrollX),a=p-(i.getBoundingClientRect().top+window.scrollY)))}}function L(e,t){return!!(e.className&&e.className.split(" ").indexOf(t)>=0)||e.parentNode&&L(e.parentNode,t)}function N(){for(var e=w.map(e=>e.parent),t=0;t<e.length;t++){-1==e[t]&&t++;for(var l=0,i=0,o=0;o<w.filter(l=>l.parent==e[t]).length;o++){var d=w.filter(l=>l.parent==e[t])[o];0==w.filter(e=>e.parent==d.id).length&&(d.childwidth=0),d.childwidth>d.width?o==w.filter(l=>l.parent==e[t]).length-1?l+=d.childwidth:l+=d.childwidth+y:o==w.filter(l=>l.parent==e[t]).length-1?l+=d.width:l+=d.width+y}-1!=e[t]&&(w.filter(l=>l.id==e[t])[0].childwidth=l);for(o=0;o<w.filter(l=>l.parent==e[t]).length;o++){d=w.filter(l=>l.parent==e[t])[o];document.querySelector(".blockid[value='"+d.id+"']").parentNode.style.top=w.filter(l=>l.id==e[t]).y+v+"px",w.filter(l=>l.id==e[t]).y=w.filter(l=>l.id==e[t]).y+v,d.childwidth>d.width?(document.querySelector(".blockid[value='"+d.id+"']").parentNode.style.left=w.filter(l=>l.id==e[t])[0].x-l/2+i+d.childwidth/2-d.width/2-(g.getBoundingClientRect().left+window.scrollX)+"px",d.x=w.filter(l=>l.id==e[t])[0].x-l/2+i+d.childwidth/2,i+=d.childwidth+y):(document.querySelector(".blockid[value='"+d.id+"']").parentNode.style.left=w.filter(l=>l.id==e[t])[0].x-l/2+i-(g.getBoundingClientRect().left+window.scrollX)+"px",d.x=w.filter(l=>l.id==e[t])[0].x-l/2+i+d.width/2,i+=d.width+y);var r=w.filter(e=>e.id==d.id)[0],n=r.x-w.filter(e=>e.id==d.parent)[0].x+20,c=r.y-r.height/2-(w.filter(e=>e.id==d.parent)[0].y+w.filter(e=>e.id==d.parent)[0].height/2);document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.style.top=w.filter(e=>e.id==d.parent)[0].y+w.filter(e=>e.id==d.parent)[0].height/2-(g.getBoundingClientRect().top+window.scrollY)+"px",n<0?(document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.style.left=r.x-5-(g.getBoundingClientRect().left+window.scrollX)+"px",document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.innerHTML='<input type="hidden" class="arrowid" value="'+d.id+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M'+(w.filter(e=>e.id==d.parent)[0].x-r.x+5)+" 0L"+(w.filter(e=>e.id==d.parent)[0].x-r.x+5)+" "+v/2+"L5 "+v/2+"L5 "+c+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M0 '+(c-5)+"H10L5 "+c+"L0 "+(c-5)+'Z" fill="#C5CCD0"/></svg>'):(document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.style.left=w.filter(e=>e.id==d.parent)[0].x-20-(g.getBoundingClientRect().left+window.scrollX)+"px",document.querySelector('.arrowid[value="'+d.id+'"]').parentNode.innerHTML='<input type="hidden" class="arrowid" value="'+d.id+'"><svg preserveaspectratio="none" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 0L20 '+v/2+"L"+n+" "+v/2+"L"+n+" "+c+'" stroke="#C5CCD0" stroke-width="2px"/><path d="M'+(n-5)+" "+(c-5)+"H"+(n+5)+"L"+n+" "+c+"L"+(n-5)+" "+(c-5)+'Z" fill="#C5CCD0"/></svg>')}}}},flowy.load()};